
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title></title>
    
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<!-- NORMAL STYLE -->
	<link rel="stylesheet" type="text/css" href="../images/style_easyui.css">
	
	<!-- EASYUI -->
	<link rel="stylesheet" type="text/css" href="../script/easyui/themes/default/easyui.css">
	<link rel="stylesheet" type="text/css" href="../script/easyui/themes/icon.css">

	<script type="text/javascript" src="../script/easyui/jquery-1.6.min.js"></script>
	<script type="text/javascript" src="../script/easyui/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="../script/easyui/locale/easyui-lang-zh_CN.js"></script>
	
	<!-- EXTENSION -->
	<script type=text/javascript src="../script/easyui/datagrid-detailview.js"></script>

	<!-- DEFAULT -->
	<script type="text/javascript" src="../script/sol-easyui-action.js"></script>
		<script>
		$(function(){
			// 查询面板
			$("#queryPanel").queryPanel({
				getparam:function(){
					var queryType = $("#queryType").val();
					var type1 = $("#type1").combobox('getValue');
					var type2 = $("#type2").combobox('getValue');
					var type3 = $("#type3").combobox('getValue');
					var type4 = $("#type4").combobox('getValue');
					return {"queryType":queryType,"queryValue":value,"type1":type1,"type2":type2,"type3":type3,"type4":type4};
				}
			});

			$("#dlg").crud();
			
			// 数据表格
			$("#listTable").grid({
				title:"产品列表",
				url:"info-product!manager.action",
				multi:true,
				columns:[[
			        {field:'type',title:'类别',width:120,
				        formatter:function(value,rec) {
							return rec.type1_cname + "-" + rec.type2_cname + "-" + rec.type3_cname + "-" + rec.type4_cname;
			        }},
			        {field:'pname',title:'产品名称',width:80},
			        {field:'pcode',title:'产品代码',width:80},
			        {field:'quality',title:'成色',width:80},
			        {field:'pweight',title:'金重',width:40},
			        {field:'stand',title:'规格',width:80},
			        {field:'unit',title:'单位',width:40},
			        {field:'premark',title:'备注',width:80},
			        {field:'opt',title:'操作',width:100,align:'center',
						formatter:function(value,rec){
							return '<span style="color:red">编辑 删除</span>';
						}
					}
			    ]],
			    tools:[{"type":"add","text":"添加产品"},{"type":"edit","text":"修改产品"},{"type":"-"},{"type":"remove","text":"删除产品"},{"type":"-"},{"type":"other","text":"添加分类"}],
			    dlg:"#dlg",
			    form:"#form",
			    addUrl:"info-product!add.action",
			    editUrl:"info-product!edit.action",
				view: detailview,
				detailFormatter:function(index,row){   
			        return '<DIV style="padding-bottom: 5px; padding-left: 0px; padding-right: 0px; padding-top: 5px" id="ddv-' + index + '"></DIV>';   
			    },   
			    onExpandRow: function(index,row) {   
			        $('#ddv-'+index).panel({   
			            border:false,   
			            cache:false,   
			            href:'ext_img.html',
			            onLoad:function(){
			                $('#listTable').datagrid('fixDetailRowHeight',index);   
			            }   
			        });   
			        $('#listTable').datagrid('fixDetailRowHeight',index);   
			    }
			});

			//查询面板下拉菜单
			$("#type1").mycombo({
				url:"info-category!combobox.action?clevel=1"
			});
			$("#type2").mycombo({
				url:"info-category!combobox.action?clevel=2"
			});
			$("#type3").mycombo({
				url:"info-category!combobox.action?clevel=3"
			});
			$("#type4").mycombo({
				url:"info-category!combobox.action?clevel=4"
			});

			//添加面板下拉菜单
			$("#add_type1").mycombo({
				url:"info-category!combobox.action?clevel=1"
			});
			$("#add_type2").mycombo({
				url:"info-category!combobox.action?clevel=2"
			});
			$("#add_type3").mycombo({
				url:"info-category!combobox.action?clevel=3"
			});
			$("#add_type4").mycombo({
				url:"info-category!combobox.action?clevel=4"
			});

		});

		
	</script>
  </head>
  
  <body>
	
	<div id="right">
		<div id="queryPanel">
			<table cellpadding="0" cellspacing="0" border="0">
				<tr>
				<td width="120" align="center">
				<select id="type1" >
				</select>
				</td>
				
				<td width="120" align="center">
				<select id="type2" >
				</select>
				</td>
				
				<td width="120" align="center">
				<select id="type3" >
				</select>
				</td>
				
				<td width="120" align="center">
				<select id="type4" >
				</select>
				</td>
				
				<td>
				<input type="hidden" id="queryType"/>
				<input id="EU_queryType"></input>  
				           
				<div id="EU_queryValue" style="width:100px">  
				    <div name="pname">品　名</div>  
				    <div name="pcode">代　码</div>
				    <div name="quality">成　色</div>  
				    <div name="pweight_f">金　重</div>
				    <div name="stand">规　格</div>  
				    <div name="unit">单　位</div>
				    <div name="premark">备　注</div>
				</div>
				</td>
				
				</tr>
			</table>

		</div>
		
		<div class="list">

			<table id="listTable"></table>

		</div>
	</div>
	
	<div id="dlg" buttons="#dlg-buttons" style="padding:10px 20px">
	<form id="form" method="post" >
	<table cellpadding="0" cellspacing="0" border="0">
		<tr>
		<td width="140" height="30">
		<select id="add_type1" name="input.type1.id"></select>
		</td>
		
		<td width="140" >
		<select id="add_type2" name="input.type2.id"></select>
		</td>
		
		<td width="140" >
		<select id="add_type3" name="input.type3.id"></select>
		</td>
		
		<td width="140" >
		<select id="add_type4" name="input.type4.id"></select>
		</td>
		</tr>
		
	</table>

		
		<div class="clear5"></div>
		
		<table border="0" cellpadding="0" cellspacing="0">
		<tr>
		<td width="70" height="30">商品品名</td>
		<td width="230"><input type="text" name="input.name" value="" id="pname" required="true" validType="length[1,20]" class="easyui-validatebox"/></td>
		<td width="70" >商品代码</td>
		<td width="230"><input type="text" name="input.pcode" value="" id="pcode"  required="true" validType="length[1,20]" class="easyui-validatebox"/></td>
		</tr>
		<tr>
		<td width="70" height="30">金属成色</td>
		<td><input type="text" name="input.quality" value="" id="input_quality"  required="true" validType="length[1,20]" class="easyui-validatebox"/></td>
		<td>金　　重</td>
		<td><input type="text" name="input.pweight" value="" id="input_weight"  required="true" validType="length[1,20]" class="easyui-validatebox"/></td>
		</tr>
		<tr>
		<td width="70" height="30">规　　格</td>
		<td><input type="text" name="input.stand" value="" id="input_stand"  required="true" validType="length[1,20]" class="easyui-validatebox"/></td>
		<td width="70" height="30">单　　位</td>
		<td><input type="text" name="input.unit" value="" id="input_unit"  required="true" validType="length[1,20]" class="easyui-validatebox"/></td>
		</tr>
		<tr>
		<td width="70" height="30">备　　注</td>
		<td colspan="3"><input type="text" name="input.premark" value="" id="input_remark"  required="false" validType="length[1,20]" class="easyui-validatebox"/></td>
		</tr>
		<tr>
		<td width="70" height="30">图　　片</td>
		<td colspan="3"><input type="file" name="input.image" /></td>
		</tr>
		
		</table>
	</form>
	</div>
	
	<div id="dlg-buttons">
		<a href="#" class="easyui-linkbutton" iconCls="icon-ok" id="dlg-save">保存</a>
		<a href="#" class="easyui-linkbutton" iconCls="icon-cancel" id="dlg-cancel">取消</a>
	</div>
	
  </body>
</html>
